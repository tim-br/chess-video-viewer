<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Top Level Chess</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">


    <!-- Custom styles for this template -->
    <!-- Custom CSS -->
    <link href="/stylesheets/simple_sidebar.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../assets/js/ie-emulation-modes-warning.js"></script>

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<div id="wrapper">

    <!-- Sidebar -->
    <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <li class="sidebar-brand">
                <a href="#">
                    Top Level Chess
                </a>
            </li>

            <li id="beginner" class="level">
                <a href="#">
                    Beginner
                </a>
            </li>

            <li id="intermediate" class="level">
                <a href="#">
                    Intermediate
                </a>
            </li>

            <li id="advanced" class="level">
                <a href="#">
                    Advanced
                </a>
            </li>

            <li id="home-text">
                <a href="#">
                    Home
                </a>
            </li>

        </ul>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->

    <div id="page-content-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="center-block">
                    <div id="hide-div">
                        <!-- <h1 class="launch-div">Top Level Chess</h1> -->
                        <br>
                        <div class="center-block">
                            <img  class="launch-div center-block" src="/images/top-level-chess-logo-xsmall.gif" alt="Mountain View">
                            <br>
                            <p>We are very excited to start the second year of our Chess Program at Town Centre Montessori. Top Level Chess is run by renowned International Master (IM) Artiom Samsonkin, an experienced chess teacher, and one of Canada's Top Ten rated players. For the first time, your chess program has taken full advantage of the latest in technology, including a dedicated website with chess videos that reinforce the lessons learned in class. Every class uses a smart board and/or video projector to make your chess education more dynamic and fun! And for the first time, intermediate/advanced students will have their tournaments rated.</p>
                            <p>  We are pleased to have you join us for a year of chess that will bring out the champion in you. Our goal at Top Level Chess is to give you the latest chess tools to reach your personal best. When you are reaching your personal best you can't lose! We look forward to our inaugural year at Town Centre Montessori.</p>
                            <p>If you have questions about our program please e-mail us at toplevelchess64@gmail.com</p>

                            <a href="#menu-toggle" class="btn btn-default" id="menu-toggle">Toggle Menu</a>
                        </div>

                    </div>
                    <br>
                    <br>


                </div>

                <div id="video-view">

                    <div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
</div>

<script>
  var csrf_token= '{{csrf-token}}'
</script>
<script>

    //this is an array in case I want to have multiple videos
    //displaying at the same time
    var arr_of_displayed_id = [];// this doesn't do anything now

    //not used right now
    var empty_vids = function(){
      var to_remove = "#" + arr_of_displayed_id[0];
      $(to_remove).remove();
      arr_of_displayed_id = [];
    }

    function yolo(video_id){

      var mine = $.ajax({
         dataType: "json",
         url: "/videos/"+video_id+"/url",
         success: function(res) {
             console.log(res);
         },
         fail: function(res){
             console.log(res);
         }
     });

     mine.always(function(res){
       var fun = res;
       var url = fun.responseText;
       display_url(url);
     });

    }

    function display_url(url){
      $('#hide-div').empty();
      $("#video-view").empty();
      $("#video-view").append("<iframe width='560' height='315' src='" + url +"' frameborder='0' allowfullscreen></iframe>")
    }

    $(".video-links").click(function(e) {
        // e.preventDefault();
        var att = $(this)
        var id = att.children().attr("id");
        yolo(id);
        console.log('hello');
    });

    $("#home-text").click(function(e){
      $('#hide-div').empty();
      $("#video-view").empty();
      $("#hide-div").append('<br><div class="center-block"> <img  class="launch-div center-block" src="/images/top-level-chess-logo-xsmall.gif " alt="Mountain View"> <br> <p>We are very excited to start a new chess program at Town  Centre Montessori. Top Level Chess is run by renowned     International Master (IM) Artiom Samsonkin, an experienced chess teacher, and one of Canada\'s Top Ten rated players. For the first time, your chess program has taken full advantage of the latest in technology, including a dedicated website with chess videos that reinforce the lessons learned in class. Every class uses a smart board and/or video projector to make your chess education more dynamic and fun! And for the first time, intermediate/advanced students will have their tournaments rated.</p>                          <p>  We are pleased to have you join us for a year of chess that will bring out the champion in you. Our goal at Top Level Chess is to give you the latest chess tools to reach your personal best. When you are reaching your personal best you can\'t lose! We look forward to our inaugural year at Town Centre Montessori.</p>                       <p>If you have questions about our program please e-mail us at toplevelchess64@gmail.com</p>                          <a href="#menu-toggle" class="btn btn-default" id="menu-toggle">Toggle Menu</a>                        </div>');

        $("#menu-toggle").click(function(e) {
          e.preventDefault();
         $("#wrapper").toggleClass("toggled");
        });
    });

    $("#beginner").click(function(e){
      $('#hide-div').empty();
      $("#video-view").empty();
      $("#hide-div").append("<h3>Beginner</h3>");
      $("#hide-div").append("<br><h3 class='active-semester btn btn-lg btn-primary btn-block' >Semester 1<br><h3 class='semester-two btn btn-lg btn-primary btn-block'>Semester 2 </h3><h3 class='semester-three btn btn-lg btn-primary btn-block'>Semester 3</h3>");

      $(".active-semester").on("click", function(e){
        get_videos_ajax("my-beginner", 1);
        //append_videos($id, $(this).html());
      });
      $(".semester-two").on("click", function(e){
        get_videos_ajax("my-beginner", 2);
        //append_videos($id, $(this).html());
      });
      $(".semester-three").on("click", function(e){
        get_videos_ajax("my-beginner", 3)
      })
    });

    $("#intermediate").click(function(e){
      $('#hide-div').empty();
      $("#video-view").empty();
      $("#hide-div").append("<h3>Intermediate</h3>");
      $("#hide-div").append("<br><h3 class='active-semester btn btn-lg btn-primary btn-block' >Semester 1<br><h3 class='semester-two btn btn-lg btn-primary btn-block'>Semester 2 </h3><h3 class='semester-three btn btn-lg btn-primary btn-block'>Semester 3</h3>");

      $(".active-semester").on("click", function(e){
        get_videos_ajax("intermediate", 1);
        //append_videos($id, $(this).html());
      });
      $(".semester-two").on("click", function(e){
        get_videos_ajax("intermediate", 2);
        //append_videos($id, $(this).html());
      });
      $(".semester-three").on("click", function(e){
        get_videos_ajax("intermediate", 3)
      })
    });

    $("#advanced").click(function(e){
      $('#hide-div').empty();
      $("#video-view").empty();
      $("#hide-div").append("<h3>Advanced</h3>");
      $("#hide-div").append("<br><h3 class='active-semester btn btn-lg btn-primary btn-block' >Semester 1<br><h3 class='semester-two btn btn-lg btn-primary btn-block'>Semester 2 </h3><h3 class='semester-three btn btn-lg btn-primary btn-block'>Semester 3</h3>");

      $(".active-semester").on("click", function(e){
        get_videos_ajax("my-advanced", 1);
        //append_videos($id, $(this).html());
      });

      $(".semester-two").on("click", function(e){
        get_videos_ajax("my-advanced", 2);
        //append_videos($id, $(this).html());
      });
      $(".semester-three").on("click", function(e){
        get_videos_ajax("my-advanced", 3)
      })
    })

    function capitalizeFirstLetter(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    }
    //old function I'm not using it anymore
    // $(".level").click(function(e){
    //   $('#hide-div').empty();
    //   $("#video-view").empty();
    //   var $id = "my-" + $(this).attr("id");
    //   var title = $(this).attr("id");
    //   var new_title = capitalizeFirstLetter(title);
    //   $("#hide-div").append("<h3>"+new_title+"</h3>");
    //   $("#hide-div").append("<h3 id='"+$id+"' class='active-semester' >Semester 1<h3><h3>Semester 2</h3><h3>Semester 3</h3>");

    //   $(".active-semester").on("click", function(e){
    //     var $id = $(this).attr("id");
    //     console.log($id);
    //     get_videos_ajax($id, 1);
    //     append_videos($id, $(this).html());
    //   });
    // });

    function get_videos_ajax(level, semester){
      if(level === "my-beginner"){
        var newLevel = 1;
      }
      if(level === "my-advanced"){
        var newLevel = 2;
      }
      if(level === "intermediate"){
        var newLevel = 3;
      }
      var mine = $.ajax({
         dataType: "json",
         url: "/videos/"+newLevel+"/" + semester,
         success: function(res) {
             console.log(res);
         },
         fail: function(res){
             console.log(res);
         }
     });

     mine.always(function(res){
       var result = res;
       $("#video-view").empty(); /// this removes everything from the view
       // this adds the titles of the vids to the view
       for(i = 0; i < result.length; i++){
         displayTitle(result[i]);
       }
       if(result.length == 0){
         displayWarning()
       }

     });
    }

    var displayTitle = function (video_object){
      var video_title = video_object.title;
      console.log(video_object.title);
      var video_id = "vid_id" + video_object.id;
      console.log(video_id);
      $("#video-view").append('<span id=\"' + video_id + '\"><a><h3>'+video_title+'</h3></a></span><br>');
      var id_string = "#" + video_id
      $(id_string).click(function(e){
        console.log("hello word");
        displayVideo(video_object.url, id_string);
      });
    }

    var displayWarning = function (){
      $("#video-view").append('<span> There are no videos found for this semester :(</span>');
    }

    var displayVideo = function (url, id){

      //empty_vids();

      var new_id = id.substring(1) + "uni"; // this is just for there to be a unique id I can use
      $("#" + new_id).remove();// this removes the video so it doesn't appear twice

      $(id).append("<span id=\'"+ new_id +"\'><br><iframe width='560' height='315' src='" + url +"' frameborder='1' allowfullscreen></iframe><br></span>");

      arr_of_displayed_id.push(new_id);// this doesn't really do anything?
    }

    function putVideo(element){
      var url = element.url;
      var title = element.title;
      $("#video-view").append("<h4>"+title+"</h4><br><br>")
      $("#video-view").append("<iframe width='560' height='315' src='" + url +"' frameborder='0' allowfullscreen></iframe>")
    }

    function append_videos(id, semester){
      if(id === "my-beginner" && semester === "Semester 1"){
        console.log("yolo");
      }
    }

    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });

    </script>

</body>
</html>
